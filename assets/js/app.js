const CONFIG={API_URL:"https://ipapi.co/json/",LOADER_DELAY:1500,FADE_OUT_SPEED:800},updateText=(e,t)=>{const n=document.getElementById(e);n&&(n.textContent=t??"N/A")},updateImgSrc=(e,t)=>{const n=document.getElementById(e);n&&(n.src=`https://flagcdn.com/w160/${t.toLowerCase()}.png`??"https://flagpedia.net/favicon-32x32.png")},setStatusClass=(e,t)=>{const n=document.getElementById(e);n&&(n.className="dot wh8 "+(t?"green":"red"))},detectSystem=()=>{const{userAgent:e,platform:t,language:n}=navigator;return{browser:e.includes("Edg/")?"Edge":e.includes("OPR/")||e.includes("Opera")?"Opera":e.includes("Chrome")&&!e.includes("Chromium")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")&&!e.includes("Chrome")?"Safari":"Unknown",os:/Windows/.test(e)?"Windows":/Macintosh|Mac OS X/.test(e)?"macOS":/Android/.test(e)?"Android":/iPhone|iPad|iPod/.test(e)?"iOS":/Linux/.test(e)?"Linux":"Unknown",ua:e,platform:t,language:n}};function getBrowserTimeZone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function compareTimeZones(e){return getBrowserTimeZone()===e}const initializeDashboard=async()=>{const e=document.getElementById("loader"),t=document.querySelector(".dashboard"),n=document.getElementById("loderErrorWrap"),o=document.querySelector(".copy-btn");try{const n=await fetch(CONFIG.API_URL);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json(),a=detectSystem();updateText("ip",s.ip),updateText("isp",s.org),updateText("location",`${s.city}, ${s.region} (${s.country})`),updateText("tizn",s.timezone),updateText("js-country",`${s.country_name} (${s.country})`),updateText("js-region",s.region),updateText("js-city",s.city),updateText("js-zipcode",s.postal),updateText("js-asn",s.asn),updateImgSrc("ip-flag",s.country),updateText("browser",a.browser),updateText("os",a.os),updateText("js-ua",a.ua),updateText("lang",a.language),updateText("js-lang",a.language),updateText("js-screensize",`${window.screen.width} x ${window.screen.height}`),updateText("js-dvcmem",navigator.deviceMemory||"N/A"),updateText("js-corecpu",navigator.hardwareConcurrency||"N/A"),updateText("js-browser-timezone",getBrowserTimeZone());const i=[...navigator.plugins].find((e=>/pdf/i.test(e.name)));updateText("js-pdfplgn",i?i.name:"Internal Viewer");const r=!!(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection);setStatusClass("webrtc-status",!r),setStatusClass("js-status",!0),setStatusClass("cookie-status",navigator.cookieEnabled),setStatusClass("timezone-status",compareTimeZones(s.timezone)),r&&updateText("dns-status","VPN Active - No Leaks Detected"),setTimeout((()=>{e.style.transition="opacity 0.5s ease",e.style.opacity="0",t.classList.remove("hidden"),t.style.opacity="1",setTimeout((()=>e.remove()),CONFIG.FADE_OUT_SPEED)}),CONFIG.LOADER_DELAY),o.addEventListener("click",(async()=>{const e=document.getElementById("ip"),t=e.value;try{await navigator.clipboard.writeText(t),document.body.insertAdjacentHTML("beforeend",'<div id="copyNotification" class="show">Copied!</div>'),e.classList.add("text-green"),o.classList.add("text-green"),setTimeout((()=>{const t=document.getElementById("copyNotification");t.classList.remove("show"),setTimeout((()=>{t.remove(),e.classList.remove("text-green"),o.classList.remove("text-green")}),1500)}),1500)}catch(e){}}))}catch(e){n&&(n.style.display="block")}};document.addEventListener("DOMContentLoaded",initializeDashboard);